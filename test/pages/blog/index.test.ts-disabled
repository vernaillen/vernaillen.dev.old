import '/test/mocks/matchMedia.mock'
import { mount } from '@vue/test-utils'
import { createTestingPinia } from '@pinia/testing'
import { createRouterMock, injectRouterMock } from 'vue-router-mock'
import index from '@/pages/blog/index.vue'
import blog from '@/logics/blog'

const router = createRouterMock({
  // ...
})
beforeEach(() => {
  injectRouterMock(router)
})
/* vi.mock('@/logics/blog', () => {
  const blog = vi.fn()
  blog.prototype.getPosts = vi.fn()
  return { blog }
}) */
describe('blog/index.vue', () => {
  beforeEach(() => {
    vi.resetAllMocks()
  })

  it('should render', () => {
    const wrapper = mount(index, {
      global: {
        plugins: [createTestingPinia()],
        mocks: {
          matchMedia,
        },
      },
    })
    expect(wrapper.router).toBe(router)
    // expect(blog.getPosts).toHaveBeenCalledTimes(1)
    expect(router.getRoutes).toHaveBeenCalledTimes(1)
  })
})
